<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Live Stream</title>
  <style>
    body { font-family: Arial; display: flex; justify-content: center;
      align-items: center; height: 100vh; flex-direction: column; background:#111;color:#fff;}
    video { width: 420px; border:3px solid #00ffcc; border-radius:10px;}
    button { padding:10px 20px; margin-top:15px; border:none; background:#00ffcc;
      font-weight:bold; border-radius:6px; cursor:pointer;}
  </style>
</head>
<body>

  <h2>ğŸ“¡ Live Stream</h2>
  <video id="screen" autoplay playsinline></video>

  <button onclick="startAsSender()">ğŸ¥ Start as Employee (Send)</button>
  <button onclick="startAsViewer()">ğŸ‘ï¸ Start as Admin (View)</button>

<script>
  const screen = document.getElementById("screen");
  const pc = new RTCPeerConnection();
  let ws = new WebSocket("wss://your-server.com"); // ğŸ”´ CHANGE THIS

  // ğŸ“Œ Admin viewer
  async function startAsViewer() {
    pc.ontrack = event => screen.srcObject = event.streams[0];
    ws.onmessage = async msg => {
      let data = JSON.parse(msg.data);
      if (data.type === "offer") {
        await pc.setRemoteDescription(data.offer);
        const answer = await pc.createAnswer();
        await pc.setLocalDescription(answer);
        ws.send(JSON.stringify({ type: "answer", answer }));
      }
    };
  }

  // ğŸ¥ Employee sender
  async function startAsSender() {
    const stream = await navigator.mediaDevices.getUserMedia({ video:true, audio:false });
    screen.srcObject = stream;
    stream.getTracks().forEach(track => pc.addTrack(track, stream));

    const offer = await pc.createOffer();
    await pc.setLocalDescription(offer);
    ws.send(JSON.stringify({ type:"offer", offer }));

    ws.onmessage = async msg => {
      let data = JSON.parse(msg.data);
      if (data.type === "answer") { await pc.setRemoteDescription(data.answer); }
    };
  }
</script>
</body>
</html>
